-- Active: 1716011690015@@localhost@3306@empresa_transporte
-- Insertando registros de viajes
INSERT INTO
    viajes (
        `Bus_ID`,
        `Ruta_ID`,
        `Fecha_Programada_Viaje`
    )
VALUES 
    (1, 1, '2022-03-06 10:30:00'),
    (2, 2, '2022-03-06 21:30:00'),
    (3, 3, '2022-03-10 07:30:00'),
    (4, 4, '2022-03-10 20:30:00'),
    (5, 3, '2022-03-10 11:30:00');

-- Viajes que tiene asignado cada conductor
INSERT INTO
    viaje_conductor (`Viaje_ID`, `Conductor_ID`)
VALUES 
    (1, 1),
    (2, 2),
    (3, 3),
    (4, 4),
    (5, 5);

INSERT INTO tiquete
    (`Viajero_ID`, `Taquillero_ID`, `Viaje_ID`, `Metodo_Pago_ID`, `Valor_Tiquete`, `Aplica_Descuento`, `Valor_Descuento`, `Fecha_Compra`)
VALUES
    (1, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-01 11:55'),
    (2, NULL, 1, 3, 80000, TRUE, 0.6, '2022-03-01 11:59'),
    (2, NULL, 1, 3, 80000, TRUE, 0.3, '2022-03-01 12:06'),
    (3, NULL, 1, 2, 80000, TRUE, 0.6, '2022-03-01 14:26'),
    (3, NULL, 1, 4, 80000, TRUE, 0.6, '2022-03-01 16:38'),
    (4, 2, 1, 2, 80000, TRUE, 0.6, '2022-03-01 16:39'),
    (4, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 16:42'),
    (5, 1, 1, 3, 80000, TRUE, 0.6, '2022-03-01 16:45'),
    (6, 2, 1, 3, 80000, TRUE, 0.6, '2022-03-01 16:45'),
    (6, 2, 1, 3, 80000, TRUE, 0.3, '2022-03-01 16:49'),
    (7, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-01 16:51'),
    (7, 1, 1, 1, 80000, TRUE, 0.3, '2022-03-01 16:55'),
    (8, 2, 1, 4, 80000, TRUE, 0.6, '2022-03-01 17:15'),
    (9, 2, 1, 2, 80000, TRUE, 0.6, '2022-03-01 17:24'),
    (9, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 17:27'),
    (9, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 17:29'),
    (9, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 17:29'),
    (9, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 17:32'),
    (9, 2, 1, 2, 80000, TRUE, 0.3, '2022-03-01 17:36'),
    (10, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-01 17:36'),
    (11, 2, 1, 2, 80000, TRUE, 0.6, '2022-03-01 17:42'),
    (12, 1, 1, 2, 80000, TRUE, 0.6, '2022-03-01 17:46'),
    (12, 1, 2, 2, 80000, TRUE, 0.3, '2022-03-01 17:46'),
    (13, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-02 09:35'),
    (14, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-02 11:46'),
    (15, 2, 1, 3, 80000, TRUE, 0.6, '2022-03-02 16:45'),
    (10, 2, 1, 1, 80000, TRUE, 0.6, '2022-03-03 10:00'),
    (16, 1, 1, 3, 80000, TRUE, 0.6, '2022-03-03 10:01'),
    (16, 1, 1, 3, 80000, TRUE, 0.3, '2022-03-03 10:10:00'),
    (17, NULL, 1, 3, 80000, TRUE, 0.6, '2022-03-03 10:11'),
    (17, NULL, 2, 3, 80000, TRUE, 0.3, '2022-03-03 10:15'),
    (18, NULL, 2, 3, 80000, TRUE, 0.6, '2022-03-03 10:15'),
    (19, 2, 1, 1, 80000, TRUE, 0.6, '2022-03-03 10:15'),
    (20, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-03 11:36'),
    (20, 1, 1, 1, 80000, TRUE, 0.6, '2022-03-03 11:39'),
    (1, 2, 3, 2, 80000, TRUE, 0.2, '2022-03-03 15:36'),
    (21, NULL, 2, 3, 90000, TRUE, 0.2, '2022-03-06 07:35'),
    (21, NULL, 2, 3, 90000, FALSE, 0.0, '2022-03-06 07:36'),
    (22, 2, 2, 1, 90000, FALSE, 0.0, '2022-03-06 09:50'),
    (23, 2, 2, 1, 90000, TRUE, 0.2, '2022-03-06 15:36'),
    (23, 2, 2, 1, 90000, FALSE, 0.2, '2022-03-06 15:36'),
    (24, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 17:50'),
    (24, 2, 2, 1, 90000, TRUE, 0.15, '2022-03-06 17:51'),
    (25, 1, 2, 1, 90000, TRUE, 0.2, '2022-03-06 17:52'),
    (25, 1, 2, 1, 90000, TRUE, 0.2, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.65, '2022-03-06 17:53'),
    (26, 2, 2, 1, 90000, TRUE, 0.65, '2022-03-06 17:53'),
    (27, 1, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:55'),
    (27, 1, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:55'),
    (28, 2, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:59'),
    (28, 2, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:59'),
    (28, 2, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:59'),
    (28, 2, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:59'),
    (28, 2, 2, 3, 90000, TRUE, 0.5, '2022-03-06 17:59'),
    (29, 1, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:00'),
    (29, 1, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:00'),
    (29, 1, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:00'),
    (29, 1, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:00'),
    (30, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:05'),
    (30, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:05'),
    (30, 2, 2, 1, 90000, TRUE, 0.5, '2022-03-06 18:05'),
    (31, NULL, 3, 3, 90000, TRUE, 0.3, '2022-03-07 09:35'),
    (31, NULL, 3, 3, 90000, TRUE, 0.3, '2022-03-07 09:35'),
    (32, 3, 3, 2, 90000, TRUE, 0.3, '2022-03-07 10:38'),
    (32, 3, 3, 2, 90000, TRUE, 0.3, '2022-03-07 10:39'),
    (33, 3, 3, 3, 90000, TRUE, 0.3, '2022-03-07 10:59'),
    (33, 3, 3, 3, 90000, TRUE, 0.3, '2022-03-07 10:59'),
    (34, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-07 14:20'),
    (34, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-07 14:21'),
    (35, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-07 15:45'),
    (35, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-07 15:46'),
    (36, 4, 3, 1, 90000, TRUE, 0.3, '2022-03-07 17:35'),
    (36, 4, 3, 3, 90000, TRUE, 0.3, '2022-03-08 10:35'),
    (37, 3, 3, 1, 90000, TRUE, 0.2, '2022-03-08 17:30'),
    (38, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-08 18:30'),
    (38, 4, 3, 3, 90000, FALSE, 0.0, '2022-03-09 08:24'),
    (37, NULL, 3, 3, 90000, FALSE, 0.0, '2022-03-09 10:35'),
    (10, NULL, 3, 3, 90000, FALSE, 0.0, '2022-03-09 14:25'),
    (39, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 14:36'),
    (39, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 14:36'),
    (14, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-09 14:38'),
    (14, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-09 14:40'),
    (15, NULL, 3, 4, 90000, FALSE, 0.0, '2022-03-09 15:00'),
    (40, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:20'),
    (40, 3, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:22'),
    (5, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:30'),
    (5, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:30'),
    (41, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:32'),
    (41, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:33'),
    (42, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:34'),
    (42, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:35'),
    (43, 3, 3, 3, 90000, FALSE, 0.0, '2022-03-09 15:36'),
    (43, 4, 3, 1, 90000, FALSE, 0.0, '2022-03-09 15:37'),
    (43, 3, 3, 3, 90000, FALSE, 0.0, '2022-03-09 15:39'),
    (44, 3, 4, 1, 90000, FALSE, 0.0, '2022-03-03 16:40'),
    (44, 3, 4, 1, 90000, FALSE, 0.0, '2022-03-03 16:42'),
    (45, 4, 4, 1, 90000, FALSE, 0.0, '2022-03-03 16:40'),
    (45, NULL, 4, 2, 90000, FALSE, 0.0, '2022-03-05 10:32'),
    (46, 3, 4, 1, 90000, TRUE, 0.2, '2022-03-03 17:32'),
    (46, 3, 4, 1, 90000, TRUE, 0.2, '2022-03-05 17:35'),
    (47, NULL, 4, 3, 90000, FALSE, 0.0, '2022-03-05 17:32'),
    (48, NULL, 4, 3, 90000, FALSE, 0.0, '2022-03-06 11:32');

-- Esto es un comentario
/*
(`Viajero_ID`, --1
`Taquillero_ID`, --2
`Viaje_ID`, --3
`Metodo_Pago_ID`, --4
`Valor_Tiquete`, --5
`Aplica_Descuento`, --6
`Valor_Descuento`, --7
`Fecha_Compra`) --8
*/

INSERT INTO tiquete
    (`Viajero_ID`, `Taquillero_ID`, `Viaje_ID`, `Metodo_Pago_ID`, `Valor_Tiquete`, `Aplica_Descuento`, `Valor_Descuento`, `Fecha_Compra`)
VALUES



SELECT v.`Viaje_ID`, b.`Capacidad_Pasajeros`, COUNT(t.`Compra_ID`) AS cantidad_pasajeros, v.`Fecha_Programada_Viaje` FROM viajes v INNER JOIN tiquete t ON t.`Viaje_ID` = v.`Viaje_ID` INNER JOIN buses b ON b.`Bus_ID` = v.`Bus_ID` GROUP BY v.`Viaje_ID`, b.`Capacidad_Pasajeros`;